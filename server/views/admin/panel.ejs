 <%
  const safeValue = (value) => value ?? '';
  const isChecked = (value) => (value ? 'checked' : '');
  const pagesList = Array.isArray(pages) ? pages : [];
  const adminQuery = query || {};
  const adminSaved = adminQuery.saved === '1';
  const activeTab = adminQuery.tab || (pagesList[0] ? `page-${pagesList[0].id}` : '');
  const getBlock = (blocks, type) => (Array.isArray(blocks) ? blocks.find((block) => block?.type === type) : null) || {};
  const getHeroCtaLabel = (block) => block?.ctaLabel || block?.cta?.label || '';
  const getHeroCtaHref = (block) => block?.ctaHref || block?.cta?.href || '';
  const getHeroImage = (block) => block?.image || block?.imageUrl || block?.img?.src || '';
  const getCtaTitle = (block) => block?.title || block?.headline || '';
  const getCtaText = (block) => block?.text || block?.subline || '';
  const getCtaButtonLabel = (block) => block?.button?.label || block?.cta?.label || '';
  const getCtaButtonHref = (block) => block?.button?.href || block?.cta?.href || '';
  const getImageTextImage = (block) => block?.img?.src || block?.imageUrl || '';
  const getAltValue = (value, locale) => {
    if (value && typeof value === 'object') {
      return value[locale] || '';
    }
    return value || '';
  };
  const getAltDe = (value) => getAltValue(value, 'de');
  const getAltEn = (value) => getAltValue(value, 'en');
  const getHeroAlt = (block) => block?.imageAlt || block?.alt || '';
  const getImageTextAlt = (block) => block?.img?.alt || block?.imageAlt || '';
  const getRichText = (block) => block?.html || block?.text || '';
  const formatDateTime = (value) => {
    if (!value) return '';
    const date = new Date(value);
    if (Number.isNaN(date.getTime())) return '';
    return date.toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric' });
  };
    const galleryCategoryOptions = [
    { value: 'team', label: 'Team & Alltag' },
    { value: 'work', label: 'Arbeiten vor Ort' },
    { value: 'results', label: 'Ergebnisse & Referenzen' }
  ];
  const galleryCategoryLabel = (value) => {
    const option = galleryCategoryOptions.find((entry) => entry.value === value);
    return option?.label || 'Team & Alltag';
  };
%>
 <section class="admin-shell">
   <aside class="admin-sidebar">
     <div class="admin-sidebar__header">
       <h1>Admin Bereich</h1>
     </div>
     <div class="admin-profile">
       <div class="admin-avatar" aria-hidden="true">
         <span>A</span>
       </div>
       <div class="admin-profile__text">
         <strong><%= adminUser?.firstName || 'Admin' %> <%= adminUser?.lastName || '' %></strong>
         <span>eingeloggt</span>
       </div>
     </div>

     <nav class="admin-nav">
       <button class="admin-nav__item is-active" type="button" data-nav-group="pages">
         Webseiten bearbeiten
         <span class="admin-nav__chevron">‹</span>
       </button>
       <button class="admin-nav__item" type="button" data-nav-group="gallery">
         Admin Gallery
         <span class="admin-nav__chevron">›</span>
       </button>
       <button class="admin-nav__item" type="button" data-nav-group="newsletter">
         Newsletter Anmeldungen
         <span class="admin-nav__chevron">›</span>
       </button>
       <a class="admin-nav__item" href="/"></a>
       Website ansehen
       <span class="admin-nav__chevron">›</span>
       </a>
       <form action="/logout" method="post">
         <button class="admin-nav__item" type="submit">
           Logout
           <span class="admin-nav__chevron">›</span>
         </button>
       </form>
     </nav>
   </aside>

   <section class="admin-content">
     <div class="admin-content__section" data-nav-content="pages">
       <header class="admin-content__header">
         <div>
           <h2>Webseiten bearbeiten</h2>
           <p>Bearbeite Inhalte, Meta-Daten und Navigationseinträge der einzelnen Seiten.</p>
         </div>
         <% if (adminSaved) { %>
         <div class="admin-panel__alert admin-panel__alert--success">Änderungen wurden gespeichert.</div>
         <% } %>
       </header>
       <div class="admin-tabs" data-admin-tabs="pages">
         <% pagesList.forEach((page) => { %>
         <button class="admin-tab <%= activeTab === `page-${page.id}` ? 'is-active' : '' %>" type="button" data-tab="page-<%= page.id %>">
           <%= page.title %>
         </button>
         <% }) %>
       </div>
       <% pagesList.forEach((page) => { %>
       <%
        const blocks = Array.isArray(page.content) ? page.content : [];
      %>

       <form class="admin-panel <%= activeTab === `page-${page.id}` ? '' : 'is-hidden' %>" method="post" action="/adminbackend/pages/<%= page.id %>" enctype="multipart/form-data" data-panel="page-<%= page.id %>" data-panel-group="pages">
         <input type="hidden" name="page_mode" value="blocks">
         <div class="admin-panel__section">
           <h3 class="admin-panel__title">Seiteneinstellungen</h3>
           <div class="admin-grid">
             <div class="admin-field">
               <label>Titel</label>
               <input type="text" name="title" value="<%= safeValue(page.title) %>" required>
             </div>
             <div class="admin-field">
               <label>Slug</label>
               <input type="text" name="slug" value="<%= safeValue(page.slug) %>" required>
             </div>
             <div class="admin-field">
               <label>Canonical Path</label>
               <input type="text" name="canonical_path" value="<%= safeValue(page.canonical_path) %>">
             </div>
           </div>
           <div class="admin-grid">
             <label>Meta Title</label>
             <input type="text" name="meta_title" value="<%= safeValue(page.meta_title) %>">
           </div>
           <div class="admin-field">
             <label>Meta Description</label>
             <input type="text" name="meta_description" value="<%= safeValue(page.meta_description) %>">
           </div>
         </div>
         <div class="admin-grid">
           <div class="admin-field">
             <label>Navigation Label</label>
             <input type="text" name="nav_label" value="<%= safeValue(page.nav_label) %>">
           </div>
           <div class="admin-field">
             <label>Navigation Order</label>
             <input type="number" name="nav_order" value="<%= safeValue(page.nav_order) %>">
           </div>
           <div class="admin-field">
             <label>Locale</label>
             <input type="text" name="locale" value="<%= safeValue(page.locale) %>">
           </div>
           <div class="admin-field">
             <label>i18n Group</label>
             <input type="text" name="i18n_group" value="<%= safeValue(page.i18n_group) %>">
           </div>
         </div>
         <div class="admin-grid">
           <div class="admin-field admin-field--checkbox">
             <div class="admin-field admin-field--checkbox">
               <label>
                 <input type="checkbox" name="show_in_nav" <%= isChecked(page.show_in_nav) %>>
                 Sichtbar im Menü
               </label>
             </div>
             <div class="admin-field admin-field--checkbox">
               <label>
                 <input type="checkbox" name="display" <%= isChecked(page.display) %>>
                 Seite veröffentlichen
               </label>
             </div>
           </div>
         </div>
         <%
          const isLeistungenPage =
            page?.canonical_path?.startsWith('/leistungen')
            || ['leistungen', 'leistungen-de', 'leistungen-en'].includes(page?.slug);
          const contentTypeLabels = {
            hero: 'Hero',
            kosten: 'Kosten & Ablauf',
            imageSlider: 'Image Slider',
            angebote: 'Angebote',
            kontaktformular: 'Kontaktformular',
            cta: 'CTA',
            richText: 'Rich Text',
            imageText: 'Image Text',
            faq: 'FAQ',
            bereiche: 'Bereiche',
            kontaktseite: 'Kontaktseite'
          };
          const getContentLabel = (block) => {
            if (block?.type === 'hero') {
              const layout = block?.layout || (isLeistungenPage ? 'leistungen' : 'default');
              return layout === 'leistungen' ? 'Hero (Leistungen)' : 'Hero (Standard)';
            }
            if (block?.type === 'kontaktformular') {
              const layout = block?.layout || (isLeistungenPage ? 'services' : 'default');
              return layout === 'services'
                ? 'Kontaktformular (Leistungen)'
                : 'Kontaktformular (Standard)';
            }
            return contentTypeLabels[block?.type] || block?.type || 'Komponente';
          };
          const contentAddOptions = [
            { type: 'hero', label: 'Hero (Standard)', layout: 'default' },
            { type: 'hero', label: 'Hero (Leistungen)', layout: 'leistungen' },
            { type: 'kosten', label: contentTypeLabels.kosten },
            { type: 'imageSlider', label: contentTypeLabels.imageSlider },
            { type: 'angebote', label: contentTypeLabels.angebote },
            { type: 'kontaktformular', label: 'Kontaktformular (Standard)', layout: 'default' },
            { type: 'kontaktformular', label: 'Kontaktformular (Leistungen)', layout: 'services' },
            { type: 'cta', label: contentTypeLabels.cta },
            { type: 'richText', label: contentTypeLabels.richText },
            { type: 'imageText', label: contentTypeLabels.imageText },
            { type: 'faq', label: contentTypeLabels.faq },
            { type: 'bereiche', label: contentTypeLabels.bereiche },
            { type: 'kontaktseite', label: contentTypeLabels.kontaktseite }
          ];
          const contentBlocks = blocks.map((block, index) => ({
            ...block,
            _adminId: `block-${index}`
          }));
          const contentBlockOrder = contentBlocks.map((block) => block._adminId);
        %>
         <div class="admin-panel__section">
           <h3 class="admin-panel__title">Seite: Inhaltselemente</h3>
           <p class="admin-panel__hint">Komponenten hinzufügen, entfernen und sortieren. Bilder/Videos nur per Upload oder Galerie auswählen.</p>
           <div class="admin-content-editor" data-content-editor>
             <input type="hidden" name="content_block_order" value="<%= safeValue(JSON.stringify(contentBlockOrder)) %>" data-content-order>
             <div class="admin-content-blocks" data-content-blocks>
               <% contentBlocks.forEach((block) => { %>
               <div class="admin-content-block" data-content-block data-block-id="<%= block._adminId %>">
                 <input type="hidden" name="content_block_<%= block._adminId %>_type" value="<%= block.type %>" data-block-type>
                 <div class="admin-content-block__header">
                   <div>
                     <h4 class="admin-content-block__title"><%= getContentLabel(block) %></h4>
                     <p class="admin-content-block__meta">Typ: <%= block.type || 'unbekannt' %></p>
                   </div>
                   <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
                 </div>

                 <% if (block.type === 'hero') { %>
                 <%
                  const heroLayout = block?.layout || (isLeistungenPage ? 'leistungen' : 'default');
                %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Layout</label>
                     <select name="content_block_<%= block._adminId %>__layout" data-hero-layout>
                       <option value="default" <%= heroLayout === 'default' ? 'selected' : '' %>>Standard</option>
                       <option value="leistungen" <%= heroLayout === 'leistungen' ? 'selected' : '' %>>Leistungen</option>
                     </select>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Headline</label>
                     <input type="text" name="content_block_<%= block._adminId %>__headline" value="<%= safeValue(block.headline) %>">
                   </div>
                   <div class="admin-field">
                     <label>Subline</label>
                     <input type="text" name="content_block_<%= block._adminId %>__subline" value="<%= safeValue(block.subline) %>">
                   </div>
                 </div>
                 <div class="admin-grid" data-hero-layout-group="default" <%= heroLayout === 'default' ? '' : 'hidden' %>>
                   <div class="admin-field">
                     <label>CTA Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__cta.label" value="<%= safeValue(getHeroCtaLabel(block)) %>">
                   </div>
                   <div class="admin-field">
                     <label>CTA Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__cta.href" value="<%= safeValue(getHeroCtaHref(block)) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Hero-Bild</label>
                     <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                       <div class="admin-media-picker__controls">
                         <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                         <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                       </div>
                       <input type="file" name="content_block_<%= block._adminId %>__image_upload" accept="image/*" data-upload-input hidden>
                       <input type="hidden" name="content_block_<%= block._adminId %>__image_gallery_id" data-gallery-input="image" value="">
                       <input type="hidden" name="content_block_<%= block._adminId %>__image" value="<%= safeValue(getHeroImage(block)) %>" data-gallery-current>
                       <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                         <div class="admin-field">
                           <label>Alt-Text</label>
                           <input type="text" name="content_block_<%= block._adminId %>__imageAlt" data-gallery-alt-input="de" value="<%= safeValue(getHeroAlt(block)) %>">
                         </div>
                       </div>
                       <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       <% if (getHeroImage(block)) { %>
                       <a class="admin-media-picker__preview-link" href="<%= getHeroImage(block) %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= getHeroImage(block) %>" data-media-preview-type="image">
                         Aktuelles Bild anzeigen
                       </a>
                       <% } %>
                     </div>
                   </div>
                 </div>
                 <% } else if (block.type === 'kosten') { %>
                 <%
                   const steps = Array.isArray(block.steps) && block.steps.length ? block.steps : [{}, {}, {}];
                 %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Headline</label>
                     <input type="text" name="content_block_<%= block._adminId %>__headline" value="<%= safeValue(block.headline) %>">
                   </div>
                   <div class="admin-field">
                     <label>Subline</label>
                     <input type="text" name="content_block_<%= block._adminId %>__subline" value="<%= safeValue(block.subline) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Lead Text</label>
                     <textarea name="content_block_<%= block._adminId %>__leadText" rows="3"><%= safeValue(block.leadText) %></textarea>
                   </div>
                   <div class="admin-field">
                     <label>Detail Text</label>
                     <textarea name="content_block_<%= block._adminId %>__detailText" rows="3"><%= safeValue(block.detailText) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Primary Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__primaryButton.label" value="<%= safeValue(block.primaryButton?.label) %>">
                   </div>
                   <div class="admin-field">
                     <label>Primary Button Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__primaryButton.href" value="<%= safeValue(block.primaryButton?.href) %>">
                   </div>
                   <div class="admin-field">
                     <label>Secondary Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__secondaryButton.label" value="<%= safeValue(block.secondaryButton?.label) %>">
                   </div>
                   <div class="admin-field">
                     <label>Secondary Button Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__secondaryButton.href" value="<%= safeValue(block.secondaryButton?.href) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps">
                   <% steps.forEach((step, index) => { %>
                   <div class="admin-step-card">
                     <div class="admin-field">
                       <label>Schritt <%= index + 1 %> Titel</label>
                       <input type="text" name="content_block_<%= block._adminId %>__steps.<%= index %>.title" value="<%= safeValue(step?.title) %>">
                     </div>
                     <div class="admin-field">
                       <label>Schritt <%= index + 1 %> Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block_<%= block._adminId %>__steps.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block_<%= block._adminId %>__steps.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block_<%= block._adminId %>__steps.<%= index %>.imageUrl" value="<%= safeValue(step?.imageUrl) %>" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block_<%= block._adminId %>__steps.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(step?.imageAlt) %>">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                         <% if (step?.imageUrl) { %>
                         <a class="admin-media-picker__preview-link" href="<%= step.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= step.imageUrl %>" data-media-preview-type="image">
                           Aktuelles Bild anzeigen
                         </a>
                         <% } %>
                       </div>
                     </div>
                   </div>
                   <% }) %>
                 </div>
                 <% } else if (block.type === 'imageSlider') { %>
                 <%
                   const slides = Array.isArray(block.slides) && block.slides.length ? block.slides : [{}];
                 %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__button.label" value="<%= safeValue(block?.button?.label) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                   <div data-dynamic-rows-items>
                     <% slides.forEach((slide, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Slide __INDEX__ Titel">Slide <%= index + 1 %> Titel</label>
                         <input type="text" name="content_block_<%= block._adminId %>__slides.<%= index %>.title" value="<%= safeValue(slide?.title) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.title">
                       </div>
                       <div class="admin-field">
                         <label>Beschreibung</label>
                         <textarea name="content_block_<%= block._adminId %>__slides.<%= index %>.description" rows="2" data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.description"><%= safeValue(slide?.description) %></textarea>
                       </div>
                       <div class="admin-field">
                         <label>Link</label>
                         <input type="text" name="content_block_<%= block._adminId %>__slides.<%= index %>.link" value="<%= safeValue(slide?.link || slide?.href) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.link">
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__slides.<%= index %>.image.src_upload" accept="image/*" data-upload-input hidden data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.image.src_upload">
                           <input type="hidden" name="content_block_<%= block._adminId %>__slides.<%= index %>.image.src_gallery_id" data-gallery-input="image" value="" data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.image.src_gallery_id">
                           <input type="hidden" name="content_block_<%= block._adminId %>__slides.<%= index %>.image.src" value="<%= safeValue(slide?.image?.src) %>" data-gallery-current data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.image.src">
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__slides.<%= index %>.image.alt" data-gallery-alt-input="de" value="<%= safeValue(slide?.image?.alt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__slides.__INDEX__.image.alt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (slide?.image?.src) { %>
                           <a class="admin-media-picker__preview-link" href="<%= slide.image.src %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= slide.image.src %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>
                 <% } else if (block.type === 'angebote') { %>
                 <%
                   const cards = Array.isArray(block.cards) && block.cards.length ? block.cards : [{}];
                 %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__title" value="<%= safeValue(block.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Beschreibung</label>
                     <textarea name="content_block_<%= block._adminId %>__description" rows="3"><%= safeValue(block.description) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps">
                   <% cards.forEach((card, index) => { %>
                   <div class="admin-step-card">
                     <div class="admin-field">
                       <label>Karte <%= index + 1 %> Titel</label>
                       <input type="text" name="content_block_<%= block._adminId %>__cards.<%= index %>.title" value="<%= safeValue(card?.title) %>">
                     </div>
                     <div class="admin-field">
                       <label>Beschreibung</label>
                       <textarea name="content_block_<%= block._adminId %>__cards.<%= index %>.description" rows="2"><%= safeValue(card?.description) %></textarea>
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block_<%= block._adminId %>__cards.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block_<%= block._adminId %>__cards.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block_<%= block._adminId %>__cards.<%= index %>.imageUrl" value="<%= safeValue(card?.imageUrl) %>" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block_<%= block._adminId %>__cards.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(card?.imageAlt) %>">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                         <% if (card?.imageUrl) { %>
                         <a class="admin-media-picker__preview-link" href="<%= card.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= card.imageUrl %>" data-media-preview-type="image">
                           Aktuelles Bild anzeigen
                         </a>
                         <% } %>
                       </div>
                     </div>
                   </div>
                   <% }) %>
                 </div>
                 <% } else if (block.type === 'kontaktformular') { %>
                 <%
                  const services = Array.isArray(block.services) && block.services.length
                    ? block.services.map((service) => (typeof service === 'string' ? { label: service } : service))
                    : [{}];
                  const contactItems = Array.isArray(block.contactItems) && block.contactItems.length ? block.contactItems : [{}];
                  const kontaktLayout = block?.layout || (isLeistungenPage ? 'services' : 'default');
                %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Layout</label>
                     <select name="content_block_<%= block._adminId %>__layout" data-kontakt-layout>
                       <option value="default" <%= kontaktLayout === 'default' ? 'selected' : '' %>>Standard</option>
                       <option value="services" <%= kontaktLayout === 'services' ? 'selected' : '' %>>Leistungen</option>
                     </select>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Action</label>
                     <input type="text" name="content_block_<%= block._adminId %>__action" value="<%= safeValue(block.action) %>">
                   </div>
                 </div>
                 <div class="admin-grid" data-kontakt-layout-group="default" <%= kontaktLayout === 'default' ? '' : 'hidden' %>>
                   <div class="admin-field">
                     <label>Badge</label>
                     <input type="text" name="content_block_<%= block._adminId %>__badge" value="<%= safeValue(block.badge) %>">
                   </div>
                 </div>
                 <div class="admin-grid" data-kontakt-layout-group="default" <%= kontaktLayout === 'default' ? '' : 'hidden' %>>
                   <div class="admin-field">
                     <label>Headline</label>
                     <input type="text" name="content_block_<%= block._adminId %>__headline" value="<%= safeValue(block.headline) %>">
                   </div>
                   <div class="admin-field">
                     <label>Headline Accent</label>
                     <input type="text" name="content_block_<%= block._adminId %>__headlineAccent" value="<%= safeValue(block.headlineAccent) %>">
                   </div>
                 </div>
                 <div class="admin-grid" data-kontakt-layout-group="default" <%= kontaktLayout === 'default' ? '' : 'hidden' %>>
                   <div class="admin-field">
                     <label>Intro</label>
                     <textarea name="content_block_<%= block._adminId %>__intro" rows="3"><%= safeValue(block.intro) %></textarea>
                   </div>
                   <div class="admin-field">
                     <label>Details</label>
                     <textarea name="content_block_<%= block._adminId %>__details" rows="3"><%= safeValue(block.details) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8" data-kontakt-layout-group="services" <%= kontaktLayout === 'services' ? '' : 'hidden' %>>
                   <div data-dynamic-rows-items>
                     <% services.forEach((service, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Service __INDEX__ Label">Service <%= index + 1 %> Label</label>
                         <input type="text" name="content_block_<%= block._adminId %>__services.<%= index %>.label" value="<%= safeValue(service?.label) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__services.__INDEX__.label">
                       </div>
                       <div class="admin-field">
                         <label>Service Link (optional)</label>
                         <input type="text" name="content_block_<%= block._adminId %>__services.<%= index %>.href" value="<%= safeValue(service?.href) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__services.__INDEX__.href">
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-kontakt-layout-group="default" <%= kontaktLayout === 'default' ? '' : 'hidden' %>>
                   <% contactItems.forEach((item, index) => { %>
                   <div class="admin-step-card">
                     <div class="admin-field">
                       <label>Kontakt Item <%= index + 1 %> Icon (SVG)</label>
                       <textarea name="content_block_<%= block._adminId %>__contactItems.<%= index %>.icon" rows="3"><%= safeValue(item?.icon) %></textarea>
                     </div>
                     <div class="admin-field">
                       <label>Text</label>
                       <input type="text" name="content_block_<%= block._adminId %>__contactItems.<%= index %>.text" value="<%= safeValue(item?.text) %>">
                     </div>
                   </div>
                   <% }) %>
                 </div>
                 <div class="admin-grid" data-kontakt-layout-group="services" <%= kontaktLayout === 'services' ? '' : 'hidden' %>>
                   <div class="admin-field">
                     <label>Seitentitel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__sideTitle" value="<%= safeValue(block.sideTitle) %>">
                   </div>
                   <div class="admin-field">
                     <label>Seitensubheading</label>
                     <input type="text" name="content_block_<%= block._adminId %>__sideSubheading" value="<%= safeValue(block.sideSubheading) %>">
                   </div>
                 </div>
                 <div class="admin-grid" data-kontakt-layout-group="services" <%= kontaktLayout === 'services' ? '' : 'hidden' %>>
                   <div class="admin-field">
                     <label>Seitentext</label>
                     <textarea name="content_block_<%= block._adminId %>__sideDescription" rows="3"><%= safeValue(block.sideDescription) %></textarea>
                   </div>
                 </div>
                 <% } else if (block.type === 'kontaktseite') { %>
                 <%
                  const startOptions = Array.isArray(block?.startCard?.options) && block.startCard.options.length ? block.startCard.options : [{}];
                  const areaAOptions = Array.isArray(block?.areaACard?.options) && block.areaACard.options.length ? block.areaACard.options : [{}];
                  const areaBOptions = Array.isArray(block?.areaBCard?.options) && block.areaBCard.options.length ? block.areaBCard.options : [{}];
                  const sectorOptions = Array.isArray(block?.sectorCard?.options) && block.sectorCard.options.length ? block.sectorCard.options : [{}];
                  const contactMethodOptions = Array.isArray(block?.contactMethodCard?.options) && block.contactMethodCard.options.length ? block.contactMethodCard.options : [{}];
                %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Action</label>
                     <input type="text" name="content_block_<%= block._adminId %>__action" value="<%= safeValue(block.action) %>">
                   </div>
                   <div class="admin-field">
                     <label>Breadcrumb</label>
                     <input type="text" name="content_block_<%= block._adminId %>__breadcrumb" value="<%= safeValue(block.breadcrumb) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Headline</label>
                     <input type="text" name="content_block_<%= block._adminId %>__headline" value="<%= safeValue(block.headline) %>">
                   </div>
                   <div class="admin-field">
                     <label>Headline Accent</label>
                     <input type="text" name="content_block_<%= block._adminId %>__headlineAccent" value="<%= safeValue(block.headlineAccent) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Beschreibung</label>
                     <textarea name="content_block_<%= block._adminId %>__description" rows="3"><%= safeValue(block.description) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Primary CTA Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__primaryCta.label" value="<%= safeValue(block.primaryCta?.label) %>">
                   </div>
                   <div class="admin-field">
                     <label>Primary CTA Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__primaryCta.href" value="<%= safeValue(block.primaryCta?.href) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Secondary CTA Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__secondaryCta.label" value="<%= safeValue(block.secondaryCta?.label) %>">
                   </div>
                   <div class="admin-field">
                     <label>Secondary CTA Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__secondaryCta.href" value="<%= safeValue(block.secondaryCta?.href) %>">
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 1: Startauswahl</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__startCard.title" value="<%= safeValue(block?.startCard?.title) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                   <div data-dynamic-rows-items>
                     <% startOptions.forEach((option, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Option __INDEX__ Label">Option <%= index + 1 %> Label</label>
                         <input type="text" name="content_block_<%= block._adminId %>__startCard.options.<%= index %>.label" value="<%= safeValue(option?.label) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__startCard.options.__INDEX__.label">
                       </div>
                       <div class="admin-field">
                         <label>Nächster Schritt (area-a / area-b)</label>
                         <input type="text" name="content_block_<%= block._adminId %>__startCard.options.<%= index %>.branch" value="<%= safeValue(option?.branch || option?.next) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__startCard.options.__INDEX__.branch">
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__startCard.options.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                           <input type="hidden" name="content_block_<%= block._adminId %>__startCard.options.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                           <input type="hidden" name="content_block_<%= block._adminId %>__startCard.options.<%= index %>.imageUrl" value="<%= safeValue(option?.imageUrl) %>" data-gallery-current>
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__startCard.options.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(option?.imageAlt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__startCard.options.__INDEX__.imageAlt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (option?.imageUrl) { %>
                           <a class="admin-media-picker__preview-link" href="<%= option.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= option.imageUrl %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 2A: Quadratmeter (Unterhalt/Andere)</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__areaACard.title" value="<%= safeValue(block?.areaACard?.title) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                   <div data-dynamic-rows-items>
                     <% areaAOptions.forEach((option, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Option __INDEX__ Label">Option <%= index + 1 %> Label</label>
                         <input type="text" name="content_block_<%= block._adminId %>__areaACard.options.<%= index %>.label" value="<%= safeValue(option?.label) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__areaACard.options.__INDEX__.label">
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__areaACard.options.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                           <input type="hidden" name="content_block_<%= block._adminId %>__areaACard.options.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                           <input type="hidden" name="content_block_<%= block._adminId %>__areaACard.options.<%= index %>.imageUrl" value="<%= safeValue(option?.imageUrl) %>" data-gallery-current>
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__areaACard.options.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(option?.imageAlt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__areaACard.options.__INDEX__.imageAlt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (option?.imageUrl) { %>
                           <a class="admin-media-picker__preview-link" href="<%= option.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= option.imageUrl %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 2B: Fensterfläche</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__areaBCard.title" value="<%= safeValue(block?.areaBCard?.title) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                   <div data-dynamic-rows-items>
                     <% areaBOptions.forEach((option, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Option __INDEX__ Label">Option <%= index + 1 %> Label</label>
                         <input type="text" name="content_block_<%= block._adminId %>__areaBCard.options.<%= index %>.label" value="<%= safeValue(option?.label) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__areaBCard.options.__INDEX__.label">
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__areaBCard.options.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                           <input type="hidden" name="content_block_<%= block._adminId %>__areaBCard.options.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                           <input type="hidden" name="content_block_<%= block._adminId %>__areaBCard.options.<%= index %>.imageUrl" value="<%= safeValue(option?.imageUrl) %>" data-gallery-current>
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__areaBCard.options.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(option?.imageAlt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__areaBCard.options.__INDEX__.imageAlt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (option?.imageUrl) { %>
                           <a class="admin-media-picker__preview-link" href="<%= option.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= option.imageUrl %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 3: Branche</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__sectorCard.title" value="<%= safeValue(block?.sectorCard?.title) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                   <div data-dynamic-rows-items>
                     <% sectorOptions.forEach((option, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Option __INDEX__ Label">Option <%= index + 1 %> Label</label>
                         <input type="text" name="content_block_<%= block._adminId %>__sectorCard.options.<%= index %>.label" value="<%= safeValue(option?.label) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__sectorCard.options.__INDEX__.label">
                       </div>
                       <div class="admin-field admin-field--checkbox">
                         <label><input type="checkbox" name="content_block_<%= block._adminId %>__sectorCard.options.<%= index %>.isOther" <%= option?.isOther ? 'checked' : '' %> data-dynamic-name-template="content_block_<%= block._adminId %>__sectorCard.options.__INDEX__.isOther"> Option öffnet Texteingabe </label>
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__sectorCard.options.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                           <input type="hidden" name="content_block_<%= block._adminId %>__sectorCard.options.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                           <input type="hidden" name="content_block_<%= block._adminId %>__sectorCard.options.<%= index %>.imageUrl" value="<%= safeValue(option?.imageUrl) %>" data-gallery-current>
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__sectorCard.options.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(option?.imageAlt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__sectorCard.options.__INDEX__.imageAlt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (option?.imageUrl) { %>
                           <a class="admin-media-picker__preview-link" href="<%= option.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= option.imageUrl %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div> <% }) %>
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 4: Andere Reinigung</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__otherCard.title" value="<%= safeValue(block?.otherCard?.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__otherCard.label" value="<%= safeValue(block?.otherCard?.label) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Platzhalter</label>
                     <input type="text" name="content_block_<%= block._adminId %>__otherCard.placeholder" value="<%= safeValue(block?.otherCard?.placeholder) %>">
                   </div>
                   <div class="admin-field">
                     <label>Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__otherCard.buttonLabel" value="<%= safeValue(block?.otherCard?.buttonLabel) %>">
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 5: Kontaktweg</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactMethodCard.title" value="<%= safeValue(block?.contactMethodCard?.title) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                   <div data-dynamic-rows-items>
                     <% contactMethodOptions.forEach((option, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Option __INDEX__ Label">Option <%= index + 1 %> Label</label>
                         <input type="text" name="content_block_<%= block._adminId %>__contactMethodCard.options.<%= index %>.label" value="<%= safeValue(option?.label) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__contactMethodCard.options.__INDEX__.label">
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__contactMethodCard.options.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                           <input type="hidden" name="content_block_<%= block._adminId %>__contactMethodCard.options.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                           <input type="hidden" name="content_block_<%= block._adminId %>__contactMethodCard.options.<%= index %>.imageUrl" value="<%= safeValue(option?.imageUrl) %>" data-gallery-current>
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__contactMethodCard.options.<%= index %>.imageAlt" data-gallery-alt-input="de" value="<%= safeValue(option?.imageAlt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__contactMethodCard.options.__INDEX__.imageAlt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (option?.imageUrl) { %>
                           <a class="admin-media-picker__preview-link" href="<%= option.imageUrl %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= option.imageUrl %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>

                 <h4 class="admin-content-block__subtitle">Karte 6: Kontaktdaten</h4>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.title" value="<%= safeValue(block?.contactDetailsCard?.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Name Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.nameLabel" value="<%= safeValue(block?.contactDetailsCard?.nameLabel) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Name Platzhalter</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.namePlaceholder" value="<%= safeValue(block?.contactDetailsCard?.namePlaceholder) %>">
                   </div>
                   <div class="admin-field">
                     <label>Email Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.emailLabel" value="<%= safeValue(block?.contactDetailsCard?.emailLabel) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Email Platzhalter</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.emailPlaceholder" value="<%= safeValue(block?.contactDetailsCard?.emailPlaceholder) %>">
                   </div>
                   <div class="admin-field">
                     <label>Telefon Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.phoneLabel" value="<%= safeValue(block?.contactDetailsCard?.phoneLabel) %>">
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Telefon Platzhalter</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.phonePlaceholder" value="<%= safeValue(block?.contactDetailsCard?.phonePlaceholder) %>">
                   </div>
                   <div class="admin-field">
                     <label>Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__contactDetailsCard.submitLabel" value="<%= safeValue(block?.contactDetailsCard?.submitLabel) %>">
                   </div>
                 </div>
                 <% } else if (block.type === 'cta') { %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__title" value="<%= safeValue(block.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Text</label>
                     <textarea name="content_block_<%= block._adminId %>__text" rows="3"><%= safeValue(block.text) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__button.label" value="<%= safeValue(block.button?.label) %>">
                   </div>
                   <div class="admin-field">
                     <label>Button Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__button.href" value="<%= safeValue(block.button?.href) %>">
                   </div>
                 </div>
                 <% } else if (block.type === 'richText') { %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__title" value="<%= safeValue(block.title) %>">
                   </div>
                 </div>
                 <div class="admin-field">
                   <label>HTML Inhalt</label>
                   <textarea name="content_block_<%= block._adminId %>__html" rows="6"><%= safeValue(block.html || block.text) %></textarea>
                 </div>
                 <% } else if (block.type === 'imageText') { %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__title" value="<%= safeValue(block.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Text</label>
                     <textarea name="content_block_<%= block._adminId %>__text" rows="4"><%= safeValue(block.text) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Bild</label>
                     <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                       <div class="admin-media-picker__controls">
                         <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                         <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                       </div>
                       <input type="file" name="content_block_<%= block._adminId %>__img.src_upload" accept="image/*" data-upload-input hidden>
                       <input type="hidden" name="content_block_<%= block._adminId %>__img.src_gallery_id" data-gallery-input="image" value="">
                       <input type="hidden" name="content_block_<%= block._adminId %>__img.src" value="<%= safeValue(block?.img?.src) %>" data-gallery-current>
                       <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                         <div class="admin-field">
                           <label>Alt-Text</label>
                           <input type="text" name="content_block_<%= block._adminId %>__img.alt" data-gallery-alt-input="de" value="<%= safeValue(block?.img?.alt) %>">
                         </div>
                       </div>
                       <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       <% if (block?.img?.src) { %>
                       <a class="admin-media-picker__preview-link" href="<%= block.img.src %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= block.img.src %>" data-media-preview-type="image">
                         Aktuelles Bild anzeigen
                       </a>
                       <% } %>
                     </div>
                   </div>
                 </div>
                 <% } else if (block.type === 'faq') { %>
                 <%
                   const faqItems = Array.isArray(block.items) && block.items.length ? block.items : [{}];
                 %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__title" value="<%= safeValue(block.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Beschreibung</label>
                     <textarea name="content_block_<%= block._adminId %>__description" rows="3"><%= safeValue(block.description) %></textarea>
                   </div>
                 </div>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__button.label" value="<%= safeValue(block.button?.label) %>">
                   </div>
                   <div class="admin-field">
                     <label>Button Link</label>
                     <input type="text" name="content_block_<%= block._adminId %>__button.href" value="<%= safeValue(block.button?.href) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                   <div data-dynamic-rows-items>
                     <% faqItems.forEach((item, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Frage __INDEX__">Frage <%= index + 1 %></label>
                         <input type="text" name="content_block_<%= block._adminId %>__items.<%= index %>.q" value="<%= safeValue(item?.q) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__items.__INDEX__.q">
                       </div>
                       <div class="admin-field">
                         <label>Antwort</label>
                         <textarea name="content_block_<%= block._adminId %>__items.<%= index %>.a" rows="3" data-dynamic-name-template="content_block_<%= block._adminId %>__items.__INDEX__.a"><%= safeValue(item?.a) %></textarea>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>
                 <% } else if (block.type === 'bereiche') { %>
                 <%
                   const sliderSlides = Array.isArray(block?.slider?.slides) && block.slider.slides.length
                     ? block.slider.slides
                     : [{}];
                 %>
                 <div class="admin-grid">
                   <div class="admin-field">
                     <label>Titel</label>
                     <input type="text" name="content_block_<%= block._adminId %>__title" value="<%= safeValue(block.title) %>">
                   </div>
                   <div class="admin-field">
                     <label>Beschreibung</label>
                     <textarea name="content_block_<%= block._adminId %>__description" rows="3"><%= safeValue(block.description) %></textarea>
                   </div>
                   <div class="admin-field">
                     <label>Slider Button Label</label>
                     <input type="text" name="content_block_<%= block._adminId %>__slider.button.label" value="<%= safeValue(block?.slider?.button?.label) %>">
                   </div>
                 </div>
                 <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                   <div data-dynamic-rows-items>
                     <% sliderSlides.forEach((slide, index) => { %>
                     <div class="admin-step-card" data-dynamic-row>
                       <div class="admin-field">
                         <label data-dynamic-label-template="Slide __INDEX__ Titel">Slide <%= index + 1 %> Titel</label>
                         <input type="text" name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.title" value="<%= safeValue(slide?.title) %>" data-dynamic-input data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.title">
                       </div>
                       <div class="admin-field">
                         <label>Beschreibung</label>
                         <textarea name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.description" rows="2" data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.description"><%= safeValue(slide?.description) %></textarea>
                       </div>
                       <div class="admin-field">
                         <label>Link</label>
                         <input type="text" name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.link" value="<%= safeValue(slide?.link || slide?.href) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.link">
                       </div>
                       <div class="admin-field">
                         <label>Bild</label>
                         <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                           <div class="admin-media-picker__controls">
                             <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                             <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                           </div>
                           <input type="file" name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.image.src_upload" accept="image/*" data-upload-input hidden data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.image.src_upload">
                           <input type="hidden" name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.image.src_gallery_id" data-gallery-input="image" value="" data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.image.src_gallery_id">
                           <input type="hidden" name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.image.src" value="<%= safeValue(slide?.image?.src) %>" data-gallery-current data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.image.src">
                           <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                             <div class="admin-field">
                               <label>Alt-Text</label>
                               <input type="text" name="content_block_<%= block._adminId %>__slider.slides.<%= index %>.image.alt" data-gallery-alt-input="de" value="<%= safeValue(slide?.image?.alt) %>" data-dynamic-name-template="content_block_<%= block._adminId %>__slider.slides.__INDEX__.image.alt">
                             </div>
                           </div>
                           <small data-gallery-preview>Keine Datei ausgewählt.</small>
                           <% if (slide?.image?.src) { %>
                           <a class="admin-media-picker__preview-link" href="<%= slide.image.src %>" target="_blank" rel="noopener noreferrer" data-media-preview-url="<%= slide.image.src %>" data-media-preview-type="image">
                             Aktuelles Bild anzeigen
                           </a>
                           <% } %>
                         </div>
                       </div>
                     </div>
                     <% }) %>
                   </div>
                 </div>
               </div>
               <% } else { %>
               <div class="admin-field">
                 <label>Komponenten-JSON</label>
                 <textarea rows="4" name="content_block_<%= block._adminId %>__raw_json"><%= safeValue(JSON.stringify(block, null, 2)) %></textarea>
                 <small>Unbekannter Block-Typ: Inhalt wird als JSON gespeichert.</small>
               </div>
               <% } %>
             </div>
             <% }) %>
           </div>

           <div class="admin-content-add">
             <div class="admin-field">
               <label>Komponente hinzufügen</label>
               <select data-content-add-select>
                 <% contentAddOptions.forEach((option) => { %>
                 <option value="<%= option.type %>" <%= option.layout ? `data-layout="${option.layout}"` : '' %>>
                   <%= option.label %>
                 </option>
                 <% }) %>
               </select>
             </div>
             <button type="button" class="admin-button" data-content-add>Hinzufügen</button>
           </div>

           <div class="admin-content-sort" data-content-sort>
             <h4>Sortierung</h4>
             <p class="admin-panel__hint">Ziehe die Elemente, um die Reihenfolge zu ändern.</p>
             <ul class="admin-content-sort__list" data-content-sort-list>
               <% contentBlocks.forEach((block) => { %>
               <li class="admin-content-sort__item" draggable="true" data-block-id="<%= block._adminId %>">
                 <span class="admin-content-sort__handle" aria-hidden="true">↕</span>
                 <span><%= getContentLabel(block) %></span>
               </li>
               <% }) %>
             </ul>
             <button type="button" class="admin-button admin-button--secondary" data-content-save-order>Sortierung speichern</button>
           </div>
           <template data-content-template="hero">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="hero" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Hero (Standard)</h4>
                   <p class="admin-content-block__meta">Typ: hero</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Layout</label>
                   <select name="content_block___BLOCK_ID___layout" data-hero-layout>
                     <option value="default" selected>Standard</option>
                     <option value="leistungen">Leistungen</option>
                   </select>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Headline</label>
                   <input type="text" name="content_block___BLOCK_ID___headline" value="">
                 </div>
                 <div class="admin-field">
                   <label>Subline</label>
                   <input type="text" name="content_block___BLOCK_ID___subline" value="">
                 </div>
               </div>
               <div class="admin-grid" data-hero-layout-group="default">
                 <div class="admin-field">
                   <label>CTA Label</label>
                   <input type="text" name="content_block___BLOCK_ID___cta.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>CTA Link</label>
                   <input type="text" name="content_block___BLOCK_ID___cta.href" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Hero-Bild</label>
                   <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                     <div class="admin-media-picker__controls">
                       <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                       <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                     </div>
                     <input type="file" name="content_block___BLOCK_ID___image_upload" accept="image/*" data-upload-input hidden>
                     <input type="hidden" name="content_block___BLOCK_ID___image_gallery_id" data-gallery-input="image" value="">
                     <input type="hidden" name="content_block___BLOCK_ID___image" value="" data-gallery-current>
                     <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                       <div class="admin-field">
                         <label>Alt-Text</label>
                         <input type="text" name="content_block___BLOCK_ID___imageAlt" data-gallery-alt-input="de" value="">
                       </div>
                     </div>
                     <small data-gallery-preview>Keine Datei ausgewählt.</small>
                   </div>
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="kosten">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="kosten" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Kosten & Ablauf</h4>
                   <p class="admin-content-block__meta">Typ: kosten</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Headline</label>
                   <input type="text" name="content_block___BLOCK_ID___headline" value="">
                 </div>
                 <div class="admin-field">
                   <label>Subline</label>
                   <input type="text" name="content_block___BLOCK_ID___subline" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Lead Text</label>
                   <textarea name="content_block___BLOCK_ID___leadText" rows="3"></textarea>
                 </div>
                 <div class="admin-field">
                   <label>Detail Text</label>
                   <textarea name="content_block___BLOCK_ID___detailText" rows="3"></textarea>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Primary Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___primaryButton.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>Primary Button Link</label>
                   <input type="text" name="content_block___BLOCK_ID___primaryButton.href" value="">
                 </div>
                 <div class="admin-field">
                   <label>Secondary Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___secondaryButton.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>Secondary Button Link</label>
                   <input type="text" name="content_block___BLOCK_ID___secondaryButton.href" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps">
                 <% [0, 1, 2].forEach((index) => { %>
                 <div class="admin-step-card">
                   <div class="admin-field">
                     <label>Schritt <%= index + 1 %> Titel</label>
                     <input type="text" name="content_block___BLOCK_ID___steps.<%= index %>.title" value="">
                   </div>
                   <div class="admin-field">
                     <label>Alt-Text Englisch</label>
                     <label>Schritt <%= index + 1 %> Bild</label>
                     <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                       <div class="admin-media-picker__controls">
                         <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                         <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                       </div>
                       <input type="file" name="content_block___BLOCK_ID___steps.<%= index %>.imageUrl_upload" accept="image/*" data-upload-input hidden>
                       <input type="hidden" name="content_block___BLOCK_ID___steps.<%= index %>.imageUrl_gallery_id" data-gallery-input="image" value="">
                       <input type="hidden" name="content_block___BLOCK_ID___steps.<%= index %>.imageUrl" value="" data-gallery-current>
                       <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                         <div class="admin-field">
                           <label>Alt-Text</label>
                           <input type="text" name="content_block___BLOCK_ID___steps.<%= index %>.imageAlt" data-gallery-alt-input="de" value="">
                         </div>
                       </div>
                       <small data-gallery-preview>Keine Datei ausgewählt.</small>
                     </div>
                   </div>
                 </div>
                 <% }) %>
               </div>
             </div>
           </template>

           <template data-content-template="imageSlider">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="imageSlider" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Image Slider</h4>
                   <p class="admin-content-block__meta">Typ: imageSlider</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___button.label" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Slide __INDEX__ Titel">Slide 1 Titel</label>
                       <input type="text" name="content_block___BLOCK_ID___slides.0.title" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.title">
                     </div>
                     <div class="admin-field">
                       <label>Beschreibung</label>
                       <textarea name="content_block___BLOCK_ID___slides.0.description" rows="2" data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.description"></textarea>
                     </div>
                     <div class="admin-field">
                       <label>Link</label>
                       <input type="text" name="content_block___BLOCK_ID___slides.0.link" value="" data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.link">
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___slides.0.image.src_upload" accept="image/*" data-upload-input hidden data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.image.src_upload">
                         <input type="hidden" name="content_block___BLOCK_ID___slides.0.image.src_gallery_id" data-gallery-input="image" value="" data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.image.src_gallery_id">
                         <input type="hidden" name="content_block___BLOCK_ID___slides.0.image.src" value="" data-gallery-current data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.image.src">
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___slides.0.image.alt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___slides.__INDEX__.image.alt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="angebote">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="angebote" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Angebote</h4>
                   <p class="admin-content-block__meta">Typ: angebote</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Beschreibung</label>
                   <textarea name="content_block___BLOCK_ID___description" rows="3"></textarea>
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps">
                 <div class="admin-step-card">
                   <div class="admin-field">
                     <label>Karte Titel</label>
                     <input type="text" name="content_block___BLOCK_ID___cards.0.title" value="">
                   </div>
                   <div class="admin-field">
                     <label>Beschreibung</label>
                     <textarea name="content_block___BLOCK_ID___cards.0.description" rows="2"></textarea>
                   </div>
                   <div class="admin-field">
                     <label>Bild</label>
                     <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                       <div class="admin-media-picker__controls">
                         <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                         <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                       </div>
                       <input type="file" name="content_block___BLOCK_ID___cards.0.imageUrl_upload" accept="image/*" data-upload-input hidden>
                       <input type="hidden" name="content_block___BLOCK_ID___cards.0.imageUrl_gallery_id" data-gallery-input="image" value="">
                       <input type="hidden" name="content_block___BLOCK_ID___cards.0.imageUrl" value="" data-gallery-current>
                       <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                         <div class="admin-field">
                           <label>Alt-Text</label>
                           <input type="text" name="content_block___BLOCK_ID___cards.0.imageAlt" data-gallery-alt-input="de" value="">
                         </div>
                       </div>
                       <small data-gallery-preview>Keine Datei ausgewählt.</small>
                     </div>
                   </div>
                 </div>
               </div>

             </div>

           </template>

           <template data-content-template="kontaktformular">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="kontaktformular" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Kontaktformular (Standard)</h4>
                   <p class="admin-content-block__meta">Typ: kontaktformular</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Layout</label>
                   <select name="content_block___BLOCK_ID___layout" data-kontakt-layout>
                     <option value="default" selected>Standard</option>
                     <option value="services">Leistungen</option>
                   </select>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Action</label>
                   <input type="text" name="content_block___BLOCK_ID___action" value="">
                 </div>
               </div>
               <div class="admin-grid" data-kontakt-layout-group="default">
                 <div class="admin-field">
                   <label>Badge</label>
                   <input type="text" name="content_block___BLOCK_ID___badge" value="">
                 </div>
               </div>
               <div class="admin-grid" data-kontakt-layout-group="default">
                 <div class="admin-field">
                   <label>Headline</label>
                   <input type="text" name="content_block___BLOCK_ID___headline" value="">
                 </div>
                 <div class="admin-field">
                   <label>Headline Accent</label>
                   <input type="text" name="content_block___BLOCK_ID___headlineAccent" value="">
                 </div>
               </div>
               <div class="admin-grid" data-kontakt-layout-group="default">
                 <div class="admin-field">
                   <label>Intro</label>
                   <textarea name="content_block___BLOCK_ID___intro" rows="3"></textarea>
                 </div>
                 <div class="admin-field">
                   <label>Details</label>
                   <textarea name="content_block___BLOCK_ID___details" rows="3"></textarea>
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8" data-kontakt-layout-group="services" hidden>
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Service __INDEX__ Label">Service 1 Label</label>
                       <input type="text" name="content_block___BLOCK_ID___services.0.label" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___services.__INDEX__.label">
                     </div>
                     <div class="admin-field">
                       <label>Service Link (optional)</label>
                       <input type="text" name="content_block___BLOCK_ID___services.0.href" value="" data-dynamic-name-template="content_block___BLOCK_ID___services.__INDEX__.href">
                     </div>
                   </div>
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-kontakt-layout-group="default">
                 <div class="admin-step-card">
                   <div class="admin-field">
                     <label>Kontakt Icon (SVG)</label>
                     <textarea name="content_block___BLOCK_ID___contactItems.0.icon" rows="3"></textarea>
                   </div>
                   <div class="admin-field">
                     <label>Text</label>
                     <input type="text" name="content_block___BLOCK_ID___contactItems.0.text" value="">
                   </div>
                 </div>
               </div>
               <div class="admin-grid" data-kontakt-layout-group="services" hidden>
                 <div class="admin-field">
                   <label>Seitentitel</label>
                   <input type="text" name="content_block___BLOCK_ID___sideTitle" value="">
                 </div>
                 <div class="admin-field">
                   <label>Seitensubheading</label>
                   <input type="text" name="content_block___BLOCK_ID___sideSubheading" value="">
                 </div>
               </div>
               <div class="admin-grid" data-kontakt-layout-group="services" hidden>
                 <div class="admin-field">
                   <label>Seitentext</label>
                   <textarea name="content_block___BLOCK_ID___sideDescription" rows="3"></textarea>
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="kontaktseite">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="kontaktseite" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Kontaktseite</h4>
                   <p class="admin-content-block__meta">Typ: kontaktseite</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Action</label>
                   <input type="text" name="content_block___BLOCK_ID___action" value="">
                 </div>
                 <div class="admin-field">
                   <label>Breadcrumb</label>
                   <input type="text" name="content_block___BLOCK_ID___breadcrumb" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Headline</label>
                   <input type="text" name="content_block___BLOCK_ID___headline" value="">
                 </div>
                 <div class="admin-field">
                   <label>Headline Accent</label>
                   <input type="text" name="content_block___BLOCK_ID___headlineAccent" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Beschreibung</label>
                   <textarea name="content_block___BLOCK_ID___description" rows="3"></textarea>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Primary CTA Label</label>
                   <input type="text" name="content_block___BLOCK_ID___primaryCta.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>Primary CTA Link</label>
                   <input type="text" name="content_block___BLOCK_ID___primaryCta.href" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Secondary CTA Label</label>
                   <input type="text" name="content_block___BLOCK_ID___secondaryCta.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>Secondary CTA Link</label>
                   <input type="text" name="content_block___BLOCK_ID___secondaryCta.href" value="">
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 1: Startauswahl</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___startCard.title" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Option __INDEX__ Label">Option 1 Label</label>
                       <input type="text" name="content_block___BLOCK_ID___startCard.options.0.label" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___startCard.options.__INDEX__.label">
                     </div>
                     <div class="admin-field">
                       <label>Nächster Schritt (area-a / area-b)</label>
                       <input type="text" name="content_block___BLOCK_ID___startCard.options.0.branch" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___startCard.options.__INDEX__.branch">
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___startCard.options.0.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block___BLOCK_ID___startCard.options.0.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block___BLOCK_ID___startCard.options.0.imageUrl" value="" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___startCard.options.0.imageAlt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___startCard.options.__INDEX__.imageAlt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 2A: Quadratmeter</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___areaACard.title" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Option __INDEX__ Label">Option 1 Label</label>
                       <input type="text" name="content_block___BLOCK_ID___areaACard.options.0.label" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___areaACard.options.__INDEX__.label">
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___areaACard.options.0.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block___BLOCK_ID___areaACard.options.0.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block___BLOCK_ID___areaACard.options.0.imageUrl" value="" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___areaACard.options.0.imageAlt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___areaACard.options.__INDEX__.imageAlt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 2B: Fensterfläche</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___areaBCard.title" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Option __INDEX__ Label">Option 1 Label</label>
                       <input type="text" name="content_block___BLOCK_ID___areaBCard.options.0.label" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___areaBCard.options.__INDEX__.label">
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___areaBCard.options.0.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block___BLOCK_ID___areaBCard.options.0.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block___BLOCK_ID___areaBCard.options.0.imageUrl" value="" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___areaBCard.options.0.imageAlt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___areaBCard.options.__INDEX__.imageAlt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 3: Branche</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___sectorCard.title" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Option __INDEX__ Label">Option 1 Label</label>
                       <input type="text" name="content_block___BLOCK_ID___sectorCard.options.0.label" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___sectorCard.options.__INDEX__.label">
                     </div>
                     <div class="admin-field admin-field--checkbox">
                       <label>
                         <input type="checkbox" name="content_block___BLOCK_ID___sectorCard.options.0.isOther" data-dynamic-name-template="content_block___BLOCK_ID___sectorCard.options.__INDEX__.isOther">
                         Option öffnet Texteingabe
                       </label>
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___sectorCard.options.0.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block___BLOCK_ID___sectorCard.options.0.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block___BLOCK_ID___sectorCard.options.0.imageUrl" value="" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___sectorCard.options.0.imageAlt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___sectorCard.options.__INDEX__.imageAlt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 4: Andere Reinigung</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___otherCard.title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Label</label>
                   <input type="text" name="content_block___BLOCK_ID___otherCard.label" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Platzhalter</label>
                   <input type="text" name="content_block___BLOCK_ID___otherCard.placeholder" value="">
                 </div>
                 <div class="admin-field">
                   <label>Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___otherCard.buttonLabel" value="">
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 5: Kontaktweg</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___contactMethodCard.title" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="3">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Option __INDEX__ Label">Option 1 Label</label>
                       <input type="text" name="content_block___BLOCK_ID___contactMethodCard.options.0.label" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___contactMethodCard.options.__INDEX__.label">
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___contactMethodCard.options.0.imageUrl_upload" accept="image/*" data-upload-input hidden>
                         <input type="hidden" name="content_block___BLOCK_ID___contactMethodCard.options.0.imageUrl_gallery_id" data-gallery-input="image" value="">
                         <input type="hidden" name="content_block___BLOCK_ID___contactMethodCard.options.0.imageUrl" value="" data-gallery-current>
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___contactMethodCard.options.0.imageAlt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___contactMethodCard.options.__INDEX__.imageAlt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>

               <h4 class="admin-content-block__subtitle">Karte 6: Kontaktdaten</h4>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Name Label</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.nameLabel" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Name Platzhalter</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.namePlaceholder" value="">
                 </div>
                 <div class="admin-field">
                   <label>Email Label</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.emailLabel" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Email Platzhalter</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.emailPlaceholder" value="">
                 </div>
                 <div class="admin-field">
                   <label>Telefon Label</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.phoneLabel" value="">
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Telefon Platzhalter</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.phonePlaceholder" value="">
                 </div>
                 <div class="admin-field">
                   <label>Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___contactDetailsCard.submitLabel" value="">
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="cta">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="cta" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">CTA</h4>
                   <p class="admin-content-block__meta">Typ: cta</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Text</label>
                   <textarea name="content_block___BLOCK_ID___text" rows="3"></textarea>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___button.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>Button Link</label>
                   <input type="text" name="content_block___BLOCK_ID___button.href" value="">
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="richText">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="richText" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Rich Text</h4>
                   <p class="admin-content-block__meta">Typ: richText</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___title" value="">
                 </div>
               </div>
               <div class="admin-field">
                 <label>HTML Inhalt</label>
                 <textarea name="content_block___BLOCK_ID___html" rows="6"></textarea>
               </div>
             </div>
           </template>

           <template data-content-template="imageText">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="imageText" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Image Text</h4>
                   <p class="admin-content-block__meta">Typ: imageText</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Text</label>
                   <textarea name="content_block___BLOCK_ID___text" rows="4"></textarea>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Bild</label>
                   <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                     <div class="admin-media-picker__controls">
                       <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                       <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                     </div>
                     <input type="file" name="content_block___BLOCK_ID___img.src_upload" accept="image/*" data-upload-input hidden>
                     <input type="hidden" name="content_block___BLOCK_ID___img.src_gallery_id" data-gallery-input="image" value="">
                     <input type="hidden" name="content_block___BLOCK_ID___img.src" value="" data-gallery-current>
                     <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                       <div class="admin-field">
                         <label>Alt-Text</label>
                         <input type="text" name="content_block___BLOCK_ID___img.alt" data-gallery-alt-input="de" value="">
                       </div>
                     </div>
                     <small data-gallery-preview>Keine Datei ausgewählt.</small>
                   </div>
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="faq">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="faq" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">FAQ</h4>
                   <p class="admin-content-block__meta">Typ: faq</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Beschreibung</label>
                   <textarea name="content_block___BLOCK_ID___description" rows="3"></textarea>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___button.label" value="">
                 </div>
                 <div class="admin-field">
                   <label>Button Link</label>
                   <input type="text" name="content_block___BLOCK_ID___button.href" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Frage __INDEX__">Frage 1</label>
                       <input type="text" name="content_block___BLOCK_ID___items.0.q" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___items.__INDEX__.q">
                     </div>
                     <div class="admin-field">
                       <label>Antwort</label>
                       <textarea name="content_block___BLOCK_ID___items.0.a" rows="3" data-dynamic-name-template="content_block___BLOCK_ID___items.__INDEX__.a"></textarea>
                     </div>
                   </div>
                 </div>
               </div>
             </div>
           </template>

           <template data-content-template="bereiche">
             <div class="admin-content-block" data-content-block data-block-id="__BLOCK_ID__">
               <input type="hidden" name="content_block___BLOCK_ID___type" value="bereiche" data-block-type>
               <div class="admin-content-block__header">
                 <div>
                   <h4 class="admin-content-block__title">Bereiche</h4>
                   <p class="admin-content-block__meta">Typ: bereiche</p>
                 </div>
                 <button type="button" class="admin-button admin-button--secondary" data-content-remove>Komponente entfernen</button>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Titel</label>
                   <input type="text" name="content_block___BLOCK_ID___title" value="">
                 </div>
                 <div class="admin-field">
                   <label>Beschreibung</label>
                   <textarea name="content_block___BLOCK_ID___description" rows="3"></textarea>
                 </div>
                 <div class="admin-field">
                   <label>Slider Button Label</label>
                   <input type="text" name="content_block___BLOCK_ID___slider.button.label" value="">
                 </div>
               </div>
               <div class="admin-grid admin-grid--steps" data-dynamic-rows data-max="8">
                 <div data-dynamic-rows-items>
                   <div class="admin-step-card" data-dynamic-row>
                     <div class="admin-field">
                       <label data-dynamic-label-template="Slide __INDEX__ Titel">Slide 1 Titel</label>
                       <input type="text" name="content_block___BLOCK_ID___slider.slides.0.title" value="" data-dynamic-input data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.title">
                     </div>
                     <div class="admin-field">
                       <label>Beschreibung</label>
                       <textarea name="content_block___BLOCK_ID___slider.slides.0.description" rows="2" data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.description"></textarea>
                     </div>
                     <div class="admin-field">
                       <label>Link</label>
                       <input type="text" name="content_block___BLOCK_ID___slider.slides.0.link" value="" data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.link">
                     </div>
                     <div class="admin-field">
                       <label>Bild</label>
                       <div class="admin-media-picker" data-gallery-picker data-gallery-allow="image">
                         <div class="admin-media-picker__controls">
                           <button type="button" class="admin-button" data-upload-trigger>Bild hochladen</button>
                           <button type="button" class="admin-button" data-gallery-open>Aus Galerie wählen</button>
                         </div>
                         <input type="file" name="content_block___BLOCK_ID___slider.slides.0.image.src_upload" accept="image/*" data-upload-input hidden data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.image.src_upload">
                         <input type="hidden" name="content_block___BLOCK_ID___slider.slides.0.image.src_gallery_id" data-gallery-input="image" value="" data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.image.src_gallery_id">
                         <input type="hidden" name="content_block___BLOCK_ID___slider.slides.0.image.src" value="" data-gallery-current data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.image.src">
                         <div class="admin-grid admin-media-picker__alt" data-alt-fields hidden>
                           <div class="admin-field">
                             <label>Alt-Text</label>
                             <input type="text" name="content_block___BLOCK_ID___slider.slides.0.image.alt" data-gallery-alt-input="de" value="" data-dynamic-name-template="content_block___BLOCK_ID___slider.slides.__INDEX__.image.alt">
                           </div>
                         </div>
                         <small data-gallery-preview>Keine Datei ausgewählt.</small>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>
             </div>
           </template>
         </div>
     </div>
     <div class="admin-panel__actions">
       <button type="submit" class="admin-button">Änderungen speichern ✓</button>
     </div>
     </form>
     <% }) %>
     </div>

     <div class="admin-content__section is-hidden" data-nav-content="gallery">
       <header class="admin-content__header">
         <div>
           <h2>Admin Gallery</h2>
           <p>Verwalte Bilder und Videos für die Sauber Mehr Galerie.</p>
         </div>
       </header>
       <div class="admin-tabs admin-tabs--sub" data-gallery-tabs>
         <button class="admin-tab is-active" type="button" data-gallery-tab="images">Bilder</button>
         <button class="admin-tab" type="button" data-gallery-tab="videos">Videos</button>
       </div>
       <section class="admin-panel" data-panel="gallery" data-panel-group="gallery">
         <div class="admin-panel__section">
           <form class="admin-panel__actions admin-panel__actions--inline" id="admin-gallery-visibility-form" method="post" action="/adminbackend/gallery/visibility">
             <button type="submit" class="admin-button">Änderungen speichern</button>
           </form>
         </div>

         <div class="admin-gallery-panel" data-gallery-panel="images">
           <div class="admin-panel__section">
             <h3 class="admin-panel__title">Neues Bild hochladen</h3>
             <form class="admin-gallery-form" method="post" action="/adminbackend/gallery/images" enctype="multipart/form-data">
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Bilddatei:</label>
                   <input type="file" name="gallery_image_file" accept="image/*" required>
                 </div>
                 <div class="admin-field">
                   <label>Alt-Text Deutsch:</label>
                   <input type="text" name="gallery_image_alt_de" placeholder="Alt-Text Deutsch" required>
                 </div>
                 <div class="admin-field">
                   <label>Alt-Text Englisch:</label>
                   <input type="text" name="gallery_image_alt_en" placeholder="Alt-Text Englisch" required>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Kategorie</label>
                   <select name="gallery_image_category">
                     <% galleryCategoryOptions.forEach((option) => { %>
                     <option value="<%= option.value %>"><%= option.label %></option>
                     <% }) %>
                   </select>
                 </div>
               </div>
               <div class="admin-panel__actions">
                 <button type="submit" class="admin-button">Bild hochladen ✓</button>
               </div>
             </form>
           </div>

           <div class="admin-panel__section">
             <h3 class="admin-panel__title">Alle Bilder</h3>
             <form class="admin-panel__actions admin-panel__actions--inline" method="post" action="/adminbackend/gallery/images/sort" data-gallery-sort-form>
               <input type="hidden" name="order" value="[]" data-gallery-sort-input>
               <button type="submit" class="admin-button">Sortierung speichern</button>
             </form>
             <% if (galleryImages?.length) { %>
             <div class="admin-gallery-grid" data-gallery-sortable>
               <% galleryImages.forEach((image) => { %>
               <div class="admin-gallery-card" draggable="true" data-gallery-sort-item data-gallery-id="<%= image.id %>" data-gallery-visible="<%= image.show_in_gallery ? 'true' : 'false' %>">
                 <button class="admin-gallery-card__handle" type="button" aria-label="Bild sortieren" data-gallery-drag-handle>↕</button>
                 <div class="admin-gallery-visibility">
                   <input type="hidden" name="images[id_<%= image.id %>]" value="0" form="admin-gallery-visibility-form">
                   <label>
                     <input type="checkbox" name="images[id_<%= image.id %>]" value="1" form="admin-gallery-visibility-form" data-gallery-visibility <%= image.show_in_gallery ? 'checked' : '' %>>
                     <span>showInGallery</span>
                   </label>
                 </div>
                 <div class="admin-field admin-field-gallery-category">
                   <label for="image-category-<%= image.id %>">Kategorie</label>
                   <select id="image-category-<%= image.id %>" name="image_categories[id_<%= image.id %>]" form="admin-gallery-visibility-form">
                     <% galleryCategoryOptions.forEach((option) => { %>
                     <option value="<%= option.value %>" <%= image.gallery_category === option.value ? 'selected' : '' %>><%= option.label %></option>
                     <% }) %>
                   </select>
                 </div>
                 <form class="admin-gallery-delete" method="post" action="/adminbackend/gallery/images/<%= image.id %>/delete">
                   <button type="submit" aria-label="Bild löschen">×</button>
                 </form>
                 <img src="<%= image.cloudinary_url || image.local_path %>" alt="<%= image.alt_de || '' %>">
                 <div class="admin-gallery-meta">
                   <p><strong>Datei:</strong> <%= image.original_name || image.filename %></p>
                   <p><strong>Größe:</strong> <%= image.size_bytes || '-' %> Bytes</p>
                   <p><strong>Alt (DE):</strong> <%= image.alt_de || '-' %></p>
                   <p><strong>Kategorie:</strong> <%= galleryCategoryLabel(image.gallery_category) %></p>
                 </div>
               </div>
               <% }) %>
             </div>
             <% } else { %>
             <p class="admin-empty">Keine Bilder vorhanden.</p>
             <% } %>
           </div>
         </div>

         <div class="admin-gallery-panel is-hidden" data-gallery-panel="videos">
           <div class="admin-panel__section">
             <h3 class="admin-panel__title">Neues Video hochladen</h3>
             <form class="admin-gallery-form" method="post" action="/adminbackend/gallery/videos" enctype="multipart/form-data">
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Videodatei:</label>
                   <input type="file" name="gallery_video_file" accept="video/*" required>
                 </div>
                 <div class="admin-field">
                   <label>Alt-Text Deutsch:</label>
                   <input type="text" name="gallery_video_alt_de" placeholder="Alt-Text Deutsch" required>
                 </div>
                 <div class="admin-field">
                   <label>Alt-Text Englisch:</label>
                   <input type="text" name="gallery_video_alt_en" placeholder="Alt-Text Englisch" required>
                 </div>
               </div>
               <div class="admin-grid">
                 <div class="admin-field">
                   <label>Kategorie</label>
                   <select name="gallery_video_category">
                     <% galleryCategoryOptions.forEach((option) => { %>
                     <option value="<%= option.value %>"><%= option.label %></option>
                     <% }) %>
                   </select>
                 </div>
               </div>
               <div class="admin-panel__actions">
                 <button type="submit" class="admin-button">Video hochladen ✓</button>
               </div>
             </form>
           </div>
           <div class="admin-panel__section">
             <h3 class="admin-panel__title">Alle Videos</h3>
             <form class="admin-panel__actions admin-panel__actions--inline" method="post" action="/adminbackend/gallery/videos/sort" data-gallery-sort-form>
               <input type="hidden" name="order" value="[]" data-gallery-sort-input>
               <button type="submit" class="admin-button">Sortierung speichern</button>
             </form>
             <% if (galleryVideos?.length) { %>
             <div class="admin-gallery-grid" data-gallery-sortable>
               <% galleryVideos.forEach((video) => { %>
               <div class="admin-gallery-card" draggable="true" data-gallery-sort-item data-gallery-id="<%= video.id %>" data-gallery-visible="<%= video.show_in_gallery ? 'true' : 'false' %>">
                 <button class="admin-gallery-card__handle" type="button" aria-label="Video sortieren" data-gallery-drag-handle>↕</button>
                 <div class="admin-gallery-visibility">
                   <input type="hidden" name="videos[id_<%= video.id %>]" value="0" form="admin-gallery-visibility-form">
                   <label>
                     <input type="checkbox" name="videos[id_<%= video.id %>]" value="1" form="admin-gallery-visibility-form" data-gallery-visibility <%= video.show_in_gallery ? 'checked' : '' %>>
                     <span>showInGallery</span>
                   </label>
                 </div>
                 <div class="admin-field admin-field-gallery-category">
                   <label for="video-category-<%= video.id %>">Kategorie</label>
                   <select id="video-category-<%= video.id %>" name="video_categories[id_<%= video.id %>]" form="admin-gallery-visibility-form">
                     <% galleryCategoryOptions.forEach((option) => { %>
                     <option value="<%= option.value %>" <%= video.gallery_category === option.value ? 'selected' : '' %>><%= option.label %></option>
                     <% }) %>
                   </select>
                 </div>
                 <form class="admin-gallery-delete" method="post" action="/adminbackend/gallery/videos/<%= video.id %>/delete">
                   <button type="submit" aria-label="Video löschen">×</button>
                 </form>
                 <video src="<%= video.cloudinary_url || video.local_path %>" controls></video>
                 <div class="admin-gallery-meta">
                   <p><strong>Datei:</strong> <%= video.original_name || video.filename %></p>
                   <p><strong>Größe:</strong> <%= video.size_bytes || '-' %> Bytes</p>
                   <p><strong>Alt (DE):</strong> <%= video.alt_de || '-' %></p>
                   <p><strong>Kategorie:</strong> <%= galleryCategoryLabel(video.gallery_category) %></p>
                 </div>
               </div>
               <% }) %>
             </div>
             <% } else { %>
             <p class="admin-empty">Keine Videos vorhanden.</p>
             <% } %>
           </div>
         </div>
       </section>
     </div>
     <div class="admin-content__section is-hidden" data-nav-content="newsletter">
       <header class="admin-content__header">
         <div>
           <h2>Newsletter Anmeldungen</h2>
           <p>Übersicht aller Newsletter-Anmeldungen für Sauber Mehr.</p>
         </div>
       </header>
       <section class="admin-panel">
         <div class="admin-panel__section">
           <% if (!newsletterSubscriptions || newsletterSubscriptions.length === 0) { %>
           <p class="admin-empty">Noch keine Anmeldungen vorhanden.</p>
           <% } else { %>
           <div class="admin-newsletter-table__wrapper">
             <table class="admin-newsletter-table">
               <thead>
                 <tr>
                   <th>Email</th>
                   <th>Artikel-News</th>
                   <th>Video-News</th>
                   <th>Sprache</th>
                   <th>Datum</th>
                 </tr>
               </thead>
               <tbody>
                 <% newsletterSubscriptions.forEach((entry) => { %>
                 <tr>
                   <td><%= entry.email %></td>
                   <td><%= entry.newsletter_articles ? 'ja' : 'nein' %></td>
                   <td><%= entry.newsletter_videos ? 'ja' : 'nein' %></td>
                   <td><%= entry.newsletter_language || '-' %></td>
                   <td><%= formatDateTime(entry.created_at) %></td>
                 </tr>
                 <% }) %>
               </tbody>
             </table>
           </div>
           <% } %>
         </div>
       </section>
     </div>

     <div class="admin-gallery-selector is-hidden" data-gallery-selector>
       <div class="admin-gallery-selector__backdrop" data-gallery-close></div>
       <div class="admin-gallery-selector__modal">
         <div class="admin-gallery-selector__header">
           <h3>Medien auswählen</h3>
           <button type="button" class="admin-gallery-selector__close" data-gallery-close>×</button>
         </div>
         <div class="admin-gallery-selector__tabs">
           <button type="button" class="admin-tab is-active" data-gallery-selector-tab="images">Bilder</button>
           <button type="button" class="admin-tab" data-gallery-selector-tab="videos">Videos</button>
         </div>
         <div class="admin-gallery-selector__panel" data-gallery-selector-panel="images">
           <div class="admin-gallery-selector__grid">
             <% (galleryImages || []).forEach((image) => { %>
             <button type="button" class="admin-gallery-selector__item" data-gallery-item data-gallery-item-type="image" data-gallery-item-id="<%= image.id %>" data-gallery-item-url="<%= image.cloudinary_url || image.local_path %>" data-gallery-item-label="<%= image.original_name || image.filename %>" data-gallery-item-alt-de="<%= image.alt_de || '' %>" data-gallery-item-alt-en="<%= image.alt_en || '' %>">
               <img src="<%= image.cloudinary_url || image.local_path %>" alt="<%= image.alt_de || '' %>">
               <span><%= image.original_name || image.filename %></span>
             </button>
             <% }) %>
           </div>
         </div>
         <div class="admin-gallery-selector__panel is-hidden" data-gallery-selector-panel="videos">
           <div class="admin-gallery-selector__grid">
             <% (galleryVideos || []).forEach((video) => { %>
             <button type="button" class="admin-gallery-selector__item" data-gallery-item data-gallery-item-type="video" data-gallery-item-id="<%= video.id %>" data-gallery-item-url="<%= video.cloudinary_url || video.local_path %>" data-gallery-item-label="<%= video.original_name || video.filename %>">
               <video src="<%= video.cloudinary_url || video.local_path %>" muted></video>
               <span><%= video.original_name || video.filename %></span>
             </button>
             <% }) %>
           </div>
         </div>
       </div>
     </div>
   </section>
 </section>