<%
  const resolveAlt = (value) => {
    if (value && typeof value === 'object') {
      const locale = page?.locale || '';
      if (locale.toLowerCase().startsWith('en')) {
        return value.en || value.de || '';
      }
      return value.de || value.en || '';
    }
    return value || '';
  };
%>
<section class="imageText">
  <div class="imageText__grid">
    <div>
      <% if (block.title) { %><h2><%- renderTextWithLinks(block.title) %></h2><% } %>
      <% if (block.text) { %>
      <% const paragraphs = String(block.text).split(/\r?\n+/).map((paragraph) => paragraph.trim()).filter(Boolean); %>
      <% paragraphs.forEach((paragraph) => { %>
      <p><%- renderTextWithLinks(paragraph) %></p>
      <% }) %>
      <% } %>
    </div>
    <div>
      <% if (block.img && block.img.src) { %>
      <img src="<%= block.img.src %>" alt="<%= resolveAlt(block.img.alt) %>" />
      <% } %>
    </div>
  </div>
</section>