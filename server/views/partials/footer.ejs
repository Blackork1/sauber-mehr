<%
  const navItems = Array.isArray(navPages) ? navPages : [];
  const leistungenRootPath = typeof navLeistungenRootPath === 'string' ? navLeistungenRootPath : '/leistungen';
  const leistungenSubpages = Array.isArray(navLeistungenSubpages) ? navLeistungenSubpages : [];
  const footerMainItems = navItems.filter((page) => {
    const path = String(page?.canonical_path || '');
    if (!path || path.startsWith(`${leistungenRootPath}/`)) return false;
    return true;
  });
%>

<footer class="site-footer">
  <div class="site-footer__container">
    <div class="site-footer__top">
      <div class="site-footer__brand">
        <div class="site-footer__logo" aria-label="Sauber Mehr">
          <img src="/icons/iconLarge.png" alt="Sauber Mehr Logo">
        </div>
        <div class="site-footer__brand-text">
          <span class="site-footer__brand-name">Sauber Mehr</span>
          <span class="site-footer__brand-sub">GebÃ¤udereinigung in Berlin</span>
        </div>
      </div>

      <div class="site-footer__columns">
        <div class="site-footer__column">
          <h3>Unternehmen</h3>
          <ul>
            <% footerMainItems.forEach((item) => { %>
            <li><a href="<%= item.canonical_path %>"><%= item.label || item.title %></a></li>
            <% }) %>
          </ul>
        </div>
        <div class="site-footer__column">
          <h3>Leistungen</h3>
          <ul>
            <% leistungenSubpages.forEach((item) => { %>
            <li><a href="<%= item.canonical_path %>"><%= item.label || item.title %></a></li>
            <% }) %>
          </ul>
        </div>
        <div class="site-footer__column">
          <h3>Kontakt</h3>
          <ul>
            <li><a href="mailto:info@sauber-mehr.de">info@sauber-mehr.de</a></li>
            <li><a href="tel:+491795163864">+49 (0)179 516 3864</a></li>
            <li>Berlin</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="site-footer__bottom">
      <p>&copy; Sauber Mehr <%= new Date().getFullYear() %></p>
      <div class="site-footer__legal">
        <a href="/impressum">Impressum</a>
        <a href="/datenschutz">DatenschutzerklÃ¤rung</a>
      </div>
      <div class="site-footer__social">
        <a href="https://www.instagram.com/" aria-label="Instagram">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M16.7 3H7.3A4.3 4.3 0 0 0 3 7.3v9.4A4.3 4.3 0 0 0 7.3 21h9.4a4.3 4.3 0 0 0 4.3-4.3V7.3A4.3 4.3 0 0 0 16.7 3zm2.4 13.7a2.4 2.4 0 0 1-2.4 2.4H7.3a2.4 2.4 0 0 1-2.4-2.4V7.3a2.4 2.4 0 0 1 2.4-2.4h9.4a2.4 2.4 0 0 1 2.4 2.4z" fill="currentColor" />
            <path d="M12 7.6A4.4 4.4 0 1 0 16.4 12 4.4 4.4 0 0 0 12 7.6zm0 7.1A2.7 2.7 0 1 1 14.7 12 2.7 2.7 0 0 1 12 14.7z" fill="currentColor" />
            <circle cx="16.6" cy="7.4" r="1.2" fill="currentColor" />
          </svg>
        </a>
        <a href="https://www.facebook.com/" aria-label="Facebook">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M13.5 22v-8h2.7l.4-3.1h-3.1V9c0-.9.3-1.5 1.6-1.5H17V4.7c-.4-.1-1.7-.2-3.1-.2-3 0-5 1.8-5 5.2v1.3H6.2V14h2.7v8h4.6z" fill="currentColor" />
          </svg>
        </a>
        <a href="https://www.linkedin.com/" aria-label="LinkedIn">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M4.9 3.5a2.4 2.4 0 1 1 0 4.8 2.4 2.4 0 0 1 0-4.8zM3 9.1h3.8V21H3zM9.4 9.1H13v1.6h.1c.5-.9 1.8-1.8 3.6-1.8 3.9 0 4.6 2.5 4.6 5.8V21h-3.8v-5.3c0-1.3 0-3-1.8-3s-2.1 1.4-2.1 2.9V21H9.4z" fill="currentColor" />
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>
